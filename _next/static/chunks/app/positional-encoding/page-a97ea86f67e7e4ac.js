(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{2289:(a,e,s)=>{"use strict";s.d(e,{A:()=>n});var r=s(5881),d=s(7210),i=s.n(d);function n(a){let{code:e,language:s}=a;return(0,r.jsxs)("div",{className:"jsx-f15f37c580e7221a code-block",children:[(0,r.jsx)("pre",{className:"jsx-f15f37c580e7221a",children:(0,r.jsx)("code",{className:"jsx-f15f37c580e7221a "+((s?"language-".concat(s):"")||""),children:e})}),(0,r.jsx)(i(),{id:"f15f37c580e7221a",children:'.code-block.jsx-f15f37c580e7221a{margin:1.5rem 0;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;overflow:hidden}pre.jsx-f15f37c580e7221a{background-color:#1e293b;color:#e2e8f0;padding:1.25rem;overflow-x:auto;font-size:.9rem;line-height:1.6;margin:0}code.jsx-f15f37c580e7221a{font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;background:transparent;padding:0}'})]})}s(6797)},6883:(a,e,s)=>{"use strict";s.d(e,{A:()=>l});var r=s(5881),d=s(7210),i=s.n(d),n=s(70),o=s.n(n);function l(){return(0,r.jsxs)("header",{className:"jsx-dd9b86782d437359 header",children:[(0,r.jsxs)("div",{className:"jsx-dd9b86782d437359 container header-container",children:[(0,r.jsx)("div",{className:"jsx-dd9b86782d437359 logo",children:(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)("span",{className:"jsx-dd9b86782d437359 logo-text",children:"Transformer论文解析"})})}),(0,r.jsxs)("nav",{className:"jsx-dd9b86782d437359 nav",children:[(0,r.jsx)("a",{href:"https://github.com/tensorflow/tensor2tensor",target:"_blank",rel:"noopener noreferrer",className:"jsx-dd9b86782d437359",children:"GitHub源码"}),(0,r.jsx)("a",{href:"https://arxiv.org/abs/1706.03762",target:"_blank",rel:"noopener noreferrer",className:"jsx-dd9b86782d437359",children:"原论文"})]})]}),(0,r.jsx)(i(),{id:"dd9b86782d437359",children:".header.jsx-dd9b86782d437359{position:fixed;top:0;left:0;right:0;height:var(--header-height);background-color:white;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);-moz-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);z-index:50}.header-container.jsx-dd9b86782d437359{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:100%;padding:0 2rem;margin-left:var(--sidebar-width)}.logo.jsx-dd9b86782d437359{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.logo-text.jsx-dd9b86782d437359{font-size:1.25rem;font-weight:700;color:var(--primary-color)}.nav.jsx-dd9b86782d437359{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:1.5rem}.nav.jsx-dd9b86782d437359 a.jsx-dd9b86782d437359{font-weight:500;padding:.5rem 0}@media(max-width:768px){.header-container.jsx-dd9b86782d437359{margin-left:0;padding:0 1rem}.logo-text.jsx-dd9b86782d437359{font-size:1.1rem}.nav.jsx-dd9b86782d437359{gap:1rem}}"})]})}},8251:(a,e,s)=>{"use strict";s.d(e,{A:()=>t});var r=s(5881),d=s(7210),i=s.n(d),n=s(6797),o=s(70),l=s.n(o);function t(){let[a,e]=(0,n.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{e(!a)},"aria-label":a?"关闭菜单":"打开菜单",className:"jsx-6dbfbfbce4844938 sidebar-toggle",children:[(0,r.jsx)("span",{className:"jsx-6dbfbfbce4844938"}),(0,r.jsx)("span",{className:"jsx-6dbfbfbce4844938"}),(0,r.jsx)("span",{className:"jsx-6dbfbfbce4844938"})]}),(0,r.jsxs)("aside",{className:"jsx-6dbfbfbce4844938 "+"sidebar ".concat(a?"open":""),children:[(0,r.jsx)("div",{className:"jsx-6dbfbfbce4844938 sidebar-header",children:(0,r.jsx)("h2",{className:"jsx-6dbfbfbce4844938",children:"目录"})}),(0,r.jsx)("nav",{className:"jsx-6dbfbfbce4844938 sidebar-nav",children:(0,r.jsx)("ul",{className:"jsx-6dbfbfbce4844938",children:[{id:"overview",title:"论文概述"},{id:"innovations",title:"关键创新点"},{id:"architecture",title:"Transformer架构详解"},{id:"components",title:"核心组件详解"},{id:"advantages",title:"Transformer的优势"},{id:"results",title:"实验结果"},{id:"variants",title:"模型变体实验"},{id:"impact",title:"Transformer的影响与应用"},{id:"conclusion",title:"总结"}].map(a=>(0,r.jsx)("li",{className:"jsx-6dbfbfbce4844938",children:(0,r.jsx)(l(),{href:"#".concat(a.id),onClick:()=>e(!1),children:a.title})},a.id))})}),(0,r.jsx)("div",{className:"jsx-6dbfbfbce4844938 sidebar-footer",children:(0,r.jsx)("a",{href:"https://arxiv.org/abs/1706.03762",target:"_blank",rel:"noopener noreferrer",className:"jsx-6dbfbfbce4844938",children:"原论文链接"})})]}),(0,r.jsx)(i(),{id:"6dbfbfbce4844938",children:".sidebar.jsx-6dbfbfbce4844938{position:fixed;top:0;left:0;width:var(--sidebar-width);height:100vh;background-color:white;border-right:1px solid var(--border-color);padding:1.5rem;overflow-y:auto;z-index:100;-webkit-transition:-webkit-transform.3s ease;-moz-transition:-moz-transform.3s ease;-o-transition:-o-transform.3s ease;transition:-webkit-transform.3s ease;transition:-moz-transform.3s ease;transition:-o-transform.3s ease;transition:transform.3s ease}.sidebar-header.jsx-6dbfbfbce4844938{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}.sidebar-header.jsx-6dbfbfbce4844938 h2.jsx-6dbfbfbce4844938{margin:0;font-size:1.5rem;color:var(--primary-color)}.sidebar-nav.jsx-6dbfbfbce4844938 ul.jsx-6dbfbfbce4844938{list-style:none;padding:0}.sidebar-nav.jsx-6dbfbfbce4844938 li.jsx-6dbfbfbce4844938{margin-bottom:.8rem}.sidebar-nav.jsx-6dbfbfbce4844938 a.jsx-6dbfbfbce4844938{display:block;padding:.5rem 0;color:var(--text-color)}.sidebar-nav.jsx-6dbfbfbce4844938 a.jsx-6dbfbfbce4844938:hover{color:var(--primary-color)}.sidebar-footer.jsx-6dbfbfbce4844938{margin-top:2rem;padding-top:1rem;border-top:1px solid var(--border-color)}.sidebar-footer.jsx-6dbfbfbce4844938 a.jsx-6dbfbfbce4844938{display:block;padding:.5rem 0;color:var(--primary-color);font-weight:500}.sidebar-toggle.jsx-6dbfbfbce4844938{position:fixed;top:1rem;left:1rem;z-index:101;display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;width:2rem;height:2rem;background:transparent;border:none;cursor:pointer;padding:0}.sidebar-toggle.jsx-6dbfbfbce4844938 span.jsx-6dbfbfbce4844938{width:2rem;height:.25rem;background:var(--primary-color);-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-transition:all.3s linear;-moz-transition:all.3s linear;-o-transition:all.3s linear;transition:all.3s linear;position:relative;-webkit-transform-origin:1px;-moz-transform-origin:1px;-ms-transform-origin:1px;-o-transform-origin:1px;transform-origin:1px}@media(max-width:768px){.sidebar-toggle.jsx-6dbfbfbce4844938{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}}"})]})}},8439:(a,e,s)=>{Promise.resolve().then(s.bind(s,8994))},8994:(a,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>x});var r=s(5881),d=s(7210),i=s.n(d),n=s(8251),o=s(6883),l=s(1309),t=s(70),c=s.n(t),f=s(2289);function x(){return(0,r.jsxs)("div",{className:"jsx-a8308ad811a3dff5 layout",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"jsx-a8308ad811a3dff5 main-content",children:(0,r.jsx)("div",{className:"jsx-a8308ad811a3dff5 container",children:(0,r.jsxs)("article",{className:"jsx-a8308ad811a3dff5 encoding-content",children:[(0,r.jsx)("h1",{className:"jsx-a8308ad811a3dff5",children:"位置编码详解"}),(0,r.jsxs)("section",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("h2",{className:"jsx-a8308ad811a3dff5",children:"位置编码的作用"}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"由于Transformer不使用循环和卷积结构，它无法感知输入序列中的位置信息。 为了让模型了解序列中的位置信息，Transformer引入了位置编码（Positional Encoding）。 位置编码将位置信息编码到输入的词向量中，使得模型能够学习和利用序列的顺序信息。"})]}),(0,r.jsxs)("section",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("h2",{className:"jsx-a8308ad811a3dff5",children:"正弦和余弦函数位置编码"}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"Transformer使用了基于正弦和余弦函数的位置编码方法，其公式如下："}),(0,r.jsx)(f.A,{code:"PE(pos, 2i) = sin(pos/10000^(2i/d_model))\nPE(pos, 2i+1) = cos(pos/10000^(2i/d_model))",language:"python"}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"其中："}),(0,r.jsxs)("ul",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"pos"}),"：表示单词在序列中的位置"]}),(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"i"}),"：表示位置编码的维度索引"]}),(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"d_model"}),"：模型的隐藏层维度，与词嵌入维度相同"]})]}),(0,r.jsxs)("div",{className:"jsx-a8308ad811a3dff5 image-container",children:[(0,r.jsx)(l.default,{src:"/positional-encoding.svg",alt:"位置编码可视化",width:700,height:400,priority:!0}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5 image-caption",children:"图1：位置编码矩阵可视化（颜色表示不同维度的值）"})]})]}),(0,r.jsxs)("section",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("h2",{className:"jsx-a8308ad811a3dff5",children:"位置编码的特性"}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"论文选择正弦和余弦函数作为位置编码的原因主要有："}),(0,r.jsxs)("ol",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"相对位置感知能力"}),"：对于固定偏移k，PE(pos+k)可以表示为PE(pos)的线性函数， 这使得模型可以轻松学习关注相对位置。"]}),(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"无限长度外推"}),"：正弦和余弦函数可以外推到训练时未见过的序列长度。"]}),(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"唯一性"}),"：每个位置对应一个唯一的编码向量。"]})]}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"在实际应用中，位置编码向量被添加到输入的词嵌入中："}),(0,r.jsx)(f.A,{code:"输入表示 = 词嵌入 + 位置编码",language:"python"})]}),(0,r.jsxs)("section",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("h2",{className:"jsx-a8308ad811a3dff5",children:"位置编码的变体"}),(0,r.jsx)("p",{className:"jsx-a8308ad811a3dff5",children:"除了原始论文中使用的固定正弦位置编码外，还有其他类型的位置编码方法："}),(0,r.jsxs)("ul",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"可学习的位置嵌入"}),"：与词嵌入类似，直接学习每个位置的向量表示。 论文的消融实验中提到，可学习的位置嵌入与固定的正弦位置编码效果相当。"]}),(0,r.jsxs)("li",{className:"jsx-a8308ad811a3dff5",children:[(0,r.jsx)("strong",{className:"jsx-a8308ad811a3dff5",children:"相对位置编码"}),"：后续改进的Transformer模型如Transformer-XL引入了相对位置编码， 仅考虑词与词之间的相对距离，而非绝对位置。"]})]})]}),(0,r.jsxs)("div",{className:"jsx-a8308ad811a3dff5 navigation-links",children:[(0,r.jsx)(c(),{href:"/",className:"nav-link",children:"返回首页"}),(0,r.jsx)(c(),{href:"/self-attention",className:"nav-link",children:"自注意力机制"})]})]})})}),(0,r.jsx)(i(),{id:"a8308ad811a3dff5",children:".encoding-content.jsx-a8308ad811a3dff5{max-width:800px;margin:0 auto;padding:2rem 0}h1.jsx-a8308ad811a3dff5{margin-bottom:2rem;color:var(--primary-color)}section.jsx-a8308ad811a3dff5{margin-bottom:3rem}.image-container.jsx-a8308ad811a3dff5{margin:2rem 0;text-align:center}.image-caption.jsx-a8308ad811a3dff5{margin-top:1rem;font-size:.9rem;color:#64748b;text-align:center}.navigation-links.jsx-a8308ad811a3dff5{margin-top:3rem;padding-top:1.5rem;border-top:1px solid var(--border-color);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.nav-link.jsx-a8308ad811a3dff5{display:inline-block;padding:.75rem 1.5rem;background-color:var(--primary-color);color:white;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-weight:500;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.nav-link.jsx-a8308ad811a3dff5:hover{background-color:var(--link-hover-color);color:white}"})]})}}},a=>{var e=e=>a(a.s=e);a.O(0,[91,690,364,770,358],()=>e(8439)),_N_E=a.O()}]);